// MongoDB Playground
// To disable this template go to Settings | MongoDB | Use Default Template For Playground.
// Make sure you are connected to enable completions and to be able to run a playground.
// Use Ctrl+Space inside a snippet or a string literal to trigger completions.

// Select the database to use.
use('gimmiDEV');

// The drop() command destroys all data from a collection.
// Make sure you run it against proper database and collection.
db.people.drop();
db.wishes.drop();

// Add an initial user
var testUserId = "5f0207e39a554680bebb93e7";
var user2Id = "5f229c32d19589f8b835e79a";
var userWithoutListId = "5f229c32d19589f8b835e79d";
var unknownUserId = "5f229c32d19589f8b835e80a"
var futureDate = new Date(2030, 12, 31);
var pastDate = new Date(2020, 8, 7);

db.people.insert([
  {
    "_id" : ObjectId(testUserId),
    "firstName": "Test",
    "lastName": "Test",
    "email": "testuser@test.be",
    "birthday": "1985-07-07T22:00:00.000Z",
    "accounts": {
      "local": {
        "password": "$2a$10$AUqOL68zxQkyBKQM6zlHR.BSaunauOCIjsZbmzsUYvVUzBSxVZWXa"
      }
    }
  },
  {
  "_id": ObjectId(user2Id),
  "firstName": "Stijn",
  "lastName": "Beeckmans",
  "email": "stijn.beeckmans@gmail.com",
  "birthday": "1985-07-07T22:00:00.000Z",
  "accounts": {
    "local": {
      "password": "$2a$10$AUqOL68zxQkyBKQM6zlHR.BSaunauOCIjsZbmzsUYvVUzBSxVZWXa"
    }
  },
  "extraInfo" : {
      "dislikes" : [ 
          {
              "text" : "Keukengerief"
          }
      ],
      "likes" : [ 
          {
              "text" : "PS4 games"
          }, 
          {
              "text" : "Gezelschapspelen"
          }, 
          {
              "url" : "https://www.belgunique.be",
              "text" : "Lokale producten van Belgunique"
          }, 
          {
              "text" : "Cadeaubon Decathlon"
          }
      ]
  }
},
{
  "_id" : ObjectId(userWithoutListId),
  "firstName": "Test",
  "lastName": "Lege wishlist",
  "email": "legewishlist@test.be",
  "birthday": "1988-02-15T22:00:00.000Z",
  "accounts": {
    "local": {
      "password": "$2a$10$AUqOL68zxQkyBKQM6zlHR.BSaunauOCIjsZbmzsUYvVUzBSxVZWXa"
    }
  }
}
]);

// Add wishes for user
db.wishes.insert([
  {
    "title" : "Ontvantgen wens",
    "price" : 100,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540141384,
        "public_id" : "wish_images/59a9dc8c6282ae0011ae848f"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "closure": {
      "reason": "verjaardag"
    }
  },
  {
    "title" : "bannerscenario 1a 'no banner'", // state = open, testuser is receiver, testuser is creator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540847984,
        "public_id" : "wish_images/595ec528de25520011403df8"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1
  },
  {
    "title" : "bannerscenario 1b 'no banner'", // state = open, testuser is receiver, testuser is not creator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540847984,
        "public_id" : "wish_images/5945a066c879a7001138ab39"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(user2Id),
    "amountWanted" : 1
  },
  {
    "title" : "bannerscenario 2 'no banner'", // state = open, testuser is not receiver, testuser is not creator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540141384,
        "public_id" : "wish_images/59a9dcc96282ae0011ae8490"
    },
    "receiver" : ObjectId(user2Id),
    "createdBy" : ObjectId(user2Id),
    "amountWanted" : 1
  },
  {
    "title" : "bannerscenario 3 'jouw idee'", // state = open, testuser is not receiver, testuser is creator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540141384,
        "public_id" : "wish_images/59a9dcc96282ae0011ae8490"
    },
    "receiver" : ObjectId(user2Id),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1
  },
  {
    "title" : "bannerscenario 4a 'jouw reservatie'", // state = reserved, testuser is reservator, testuser is receiver
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540847984,
        "public_id" : "wish_images/595ec528de25520011403df8"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "amount" : 1,
        "reservedBy" : ObjectId(testUserId),
        "reservationDate" : new Date(),
        "handoverDate": futureDate, // Reservatie moet in toekomst liggen voor status 'reserved'
    }
  },
  {
    "title" : "bannerscenario 4b 'jouw reservatie'", // state = reserved, testuser is reservator, testuser is not receiver
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540847984,
        "public_id" : "wish_images/595ec528de25520011403df8"
    },
    "receiver" : ObjectId(user2Id),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "amount" : 1,
        "reservedBy" : ObjectId(testUserId),
        "reservationDate" : new Date(),
        "handoverDate": futureDate, // Reservatie moet in toekomst liggen voor status 'reserved'
    }
  },
  {
    "title" : "bannerscenario 5 'no banner'", // state = reserved, testuser is receiver, testuser is not reservator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540141383,
        "public_id" : "wish_images/59b590507264010012417e8a"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "amount" : 1,
        "reservedBy" : ObjectId(user2Id),
        "reservationDate" : new Date(),
        "handoverDate": futureDate, // Reservatie moet in toekomst liggen voor status 'reserved'
    }
  },
  {
    "title" : "bannerscenario 6 'gereserveerd'", // state = reserved, testuser is not receiver, testuser is not reservator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540141383,
        "public_id" : "wish_images/59b590507264010012417e8a"
    },
    "receiver" : ObjectId(user2Id),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "amount" : 1,
        "reservedBy" : ObjectId(user2Id),
        "reservationDate" : new Date(),
        "handoverDate": futureDate, // Reservatie moet in toekomst liggen voor status 'reserved'
    }
  },
  {
    "title" : "bannerscenario 7 'ontvangen'", // state = received, testuser is not reservator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
         "version" : 1540141384,
        "public_id" : "wish_images/59b590507264010012417e8a"
    },
    "receiver" : ObjectId(user2Id),
    "createdBy" : ObjectId(userWithoutListId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "amount" : 1,
        "reservedBy" : ObjectId(user2Id),
        "reservationDate" : new Date(),
        "handoverDate": pastDate, // Reservatie moet in verleden liggen voor status 'received'
    }
  },
  {
    "title" : "bannerscenario 8 'ontvangen'", // state = received, testuser is not reservator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
         "version" : 1540141384,
        "public_id" : "wish_images/59b590507264010012417e8a"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "amount" : 1,
        "reservedBy" : ObjectId(user2Id),
        "reservationDate" : new Date(),
        "handoverDate": pastDate, // Reservatie moet in verleden liggen voor status 'received'
    }
  },
  {
    "title" : "bannerscenario 9 'jouw cadeau'", // state = received, testuser is reservator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
         "version" : 1540141384,
        "public_id" : "wish_images/59b590507264010012417e8a"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "amount" : 1,
        "reservedBy" : ObjectId(testUserId),
        "reservationDate" : new Date(),
        "handoverDate": pastDate, // Reservatie moet in verleden liggen voor status 'received'
    }
  },
  {
    "title" : "bannerscenario 10 'wens vervuld'", // state = fulfilled, testuser is not reservator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
         "version" : 1540141384,
        "public_id" : "wish_images/59b597d67264010012417e96"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "reservationDate" : new Date(),
        "handoverDate": pastDate, // Reservatie moet in verleden liggen voor status 'received'
        "amount" : 1,
        "reservedBy" : ObjectId(user2Id)
    },
    "giftFeedback" : {
        "_id" : ObjectId("5c7273b89585f00014fb36f6"),
        "satisfaction" : "Blij",
        "receivedOn" : ISODate("2019-02-22T10:36:24.119Z"),
        "message" : "Nog een test vanop testomgeving",
        "putBackOnList" : true
    },
    "closure" : {
        "closedBy" : ObjectId(testUserId),
        "reason" : "Cadeau ontvangen",
        "closedOn" : new Date()
    }
  },
  {
    "title" : "bannerscenario 11 'jouw cadeau'", // state = fulfilled, testuser is reservator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
         "version" : 1540141384,
        "public_id" : "wish_images/59b590507264010012417e8a"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "reservationDate" : new Date(),
        "handoverDate": pastDate, // Reservatie moet in verleden liggen voor status 'received'
        "amount" : 1,
        "reservedBy" : ObjectId(testUserId)
    },
    "giftFeedback" : {
        "_id" : ObjectId("5c7273b89585f00014fb36f6"),
        "satisfaction" : "Blij",
        "receivedOn" : ISODate("2019-02-22T10:36:24.119Z"),
        "message" : "Nog een test vanop testomgeving",
        "putBackOnList" : true
    },
    "closure" : {
        "closedBy" : ObjectId(testUserId),
        "reason" : "Cadeau ontvangen",
        "closedOn" : new Date()
    }
  },
  {
    "title" : "afgesloten wens", 
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540141383,
        "public_id" : "wish_images/59ac83c2a922200011e2c7aa"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "closure": {
      "reason": "verjaardag"
    }
  },
  {
    "title" : "voor Stijn door test",
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540847985,
        "public_id" : "wish_images/59b597d67264010012417e96"
    },
    "receiver" : ObjectId(user2Id),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1
  },
  {
    "title" : "voor Stijn",
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540141383,
        "public_id" : "wish_images/59b5988e7264010012417e98"
    },
    "receiver" : ObjectId(user2Id),
    "createdBy" : ObjectId(user2Id),
    "amountWanted" : 1
  },
  {
    "title" : "Reservatie zonder handoverDate",
    "price" : 20,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540847984,
        "public_id" : "wish_images/595ec528de25520011403df8"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "reservationDate" : new Date(),
        "amount" : 1,
        "reservedBy" : ObjectId(user2Id)
    }
  },
  {
    "title" : "Scenario 5 'no banner' met onbekende reservator", // state = reserved, testuser is receiver, testuser is not reservator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540141383,
        "public_id" : "wish_images/59b590507264010012417e8a"
    },
    "receiver" : ObjectId(testUserId),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "amount" : 1,
        "reservedBy" : ObjectId(unknownUserId),
        "reservationDate" : new Date(),
        "handoverDate": futureDate, // Reservatie moet in toekomst liggen voor status 'reserved'
    }
  },
  {
    "title" : "Scenario 6 'gereserveerd' met onbekende reservator", // state = reserved, testuser is not receiver, testuser is not reservator
    "price" : 12600,
    "url" : "www.google.com",
    "image" : {
        "version" : 1540141383,
        "public_id" : "wish_images/59b590507264010012417e8a"
    },
    "receiver" : ObjectId(user2Id),
    "createdBy" : ObjectId(testUserId),
    "amountWanted" : 1,
    "reservation" : {
        "reason" : "Zomaar...",
        "amount" : 1,
        "reservedBy" : ObjectId(unknownUserId),
        "reservationDate" : new Date(),
        "handoverDate": futureDate, // Reservatie moet in toekomst liggen voor status 'reserved'
    }
  }
]);

// Query wishes for user
db.wishes.find({receiver : ObjectId(testUserId)});
